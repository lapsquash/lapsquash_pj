# 中間発表 台本

[中間発表の作業フォルダー](https://tiny.cc/lapsq-sh/docs/1_midterm)

## 表紙

発表を始めます.

私たちは, **AI による動画短縮のための場面抽出分類システム開発** を研究を行っています.

## 3. 今学期やったこと

### チーム結成

★  
まず, 私たちはチームの結成をしました.  
バックエンドとフロントを担当する私と, フロントエンドを担当するオサカダくん, 文書の作成や UI デザインなどを担当するスズキくんです. この 3 人で進んでいます.

### システム名称の決定

★  
目的にあったように, タイムラプスを 圧縮する つまり squash するという意味で, lapsquash という名称に決定しました.  
この名称は私が提案し, この爽やかなロゴは, スズキくんが制作してくれました.

## 実装の概要

★  
研究の概要より, より具体的な実装を説明します.

### 1. 動物の動きを撮影する

まず, 動物行動の変化を捉えるために, Raspberry Pi とカメラモジュールを用いて動物の動きを撮影します.  
図のようにカメラモジュールをリボンケーブルで繋ぎ, Raspberry Pi に接続します.  
実際に接続した様子を見てみましょう.  
★  
こんな感じです. はい.  
このようにして動物の行動は撮影できるっぽそうですが, 解析させる上では, 複数の問題があります.

### 2. リアルタイムで細分化

★  
まず, 長時間の動画を AI で効率良く解析させるのは技術的に難しいです. リソースが限られていますからね.  
なので, 必要な動きのある場面だけを抽出すれば良くなりそうです.  
★  
このように 3 枚の行動の画像があります. 1 から 2 枚目は変化は無さそうですが, 2 から 3 枚目は行動が変化しています.  
では, 動物行動の変化の境目を検出するには何をトリガーにすれば良いでしょうか…？  
現時点では, 以下の 2 つのトリガーをハイブリッド方式で適用する予定です.

★  
先ほどの画像に 0, 1, 2 と番号を振ってみましょう.  
ここで, これらの画像に **類似度ハッシュ** というハッシュ関数を適用してみます.  
★  
類似度ハッシュは, 画像の特徴を抽出して, それをハッシュ値に変換する関数です.  
同じ画像であれば値は一致し, 違う画像であれば, 輝度や色, 輪郭の変化によって, 少しずつ変化します.  
つまり, 隣り合う画像のハッシュの差を取れば, $s_1$ と $s_2$ の間に大きな変化があることが分かります.  
★  
まとめると, 単位時間で **類似度ハッシュ** を算出することで, ハッシュの変化率から行動変化の境目を検出できそう ということです. しきい値の設定は今後の課題ですね.  
ちなみに, 実際の動画では, 対象の動物が動いているだけでなく, 背景も動いています. そこで…

★  
最新の物体検出モデル YOLO v8 を使用し, 類似度ハッシュと合わせて, 観察対象のみの動きを捉えることにしました. トリガーの調整が今後の課題です.  
さてこのようにして, 動物の動きを撮影し, 動きの変化を検出できるようになりました.  
これで, 長時間の動画を細分化でき, AI に解析させやすくなりました.

### 3. 動画のタイル化・圧縮

★  
そのあと, AI のインプット用にビデオクリップから時間ごとのタイル画像を生成します.  
これは, 現時点で ChatGPT が画像のインプットしかできないためです.  
タイルの大きさや枚数の調整が今後の課題ですね.  
★  
そしたら, ビデオクリップとタイル画像, メタデータをひとまとめに圧縮します.  
このフォーマットは完全に独自のものです. ここでいうメタデータはいわば箱のようなもので, 後々この箱に AI の解析結果が入り, PC アプリで見れるようにするために使います.

### 4. ストレージサーバーへ保存

★  
そしたら, この圧縮したファイルをストレージサーバーに保存します. 今回はオブジェクトストレージである SharePoint に保存します. SharePoint は, Graph API という API エンドポイント経由でアクセスできます.  
OAuth 2.0 に準拠するように実装したので, ユーザーが squasher や viewer にアクセス権限の委任をすることで, 離れたところでも安全にデータを保存できます.

### 5. AI に行動分析をさせる

★  
その後, AI に行動分析をさせます. ChatGPT-4 の Image Input API を使用して, タイル画像の特徴と説明, 事前に私たちで決めたタグ付けを AI にしてもらいます.  
これらの結果は, 先ほどのメタデータに再格納することで, PC アプリで見れるようにします.  
これらがスムーズにできるようにすることが今後の課題ですね.

### 6. アプリで見れるようにする
